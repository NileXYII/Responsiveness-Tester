<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Website Viewer — Desktop / Custom Ratios</title>
  <style>
    :root{ --accent:#2563eb; --bg:#0f172a; --card:#0b1220; --muted:#94a3b8 }
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{background:linear-gradient(180deg,#071127 0%, #071a2a 100%);color:#e6eef8;padding:18px;box-sizing:border-box}
    .app{max-width:1100px;margin:0 auto}
    .card{background:rgba(255,255,255,0.03);padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    h1{margin:0 0 8px;font-size:20px}
    .row{display:flex;gap:10px;align-items:center}
    label{font-size:13px;color:var(--muted)}
    input[type="text"],input[type="number"],select{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;min-width:0}
    button{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
    .controls{display:grid;grid-template-columns:1fr 320px;gap:12px;margin-top:12px}
    .presets{display:flex;flex-wrap:wrap;gap:8px}
    .preset-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
    .viewer-wrap{margin-top:14px;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px}
    .viewport-frame{width:100%;height:600px;background:white;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center}
    .frame-inner{border:1px solid rgba(0,0,0,0.08);box-shadow:0 2px 8px rgba(2,6,23,0.4);background:white}
    .info{margin-top:8px;font-size:13px;color:var(--muted)}
    .small{font-size:12px;color:var(--muted)}
    .kb{display:flex;gap:6px;align-items:center}
    .toggle{display:inline-flex;align-items:center;gap:8px}
    .danger{color:#ffb4b4}
    @media (max-width:880px){.controls{grid-template-columns:1fr;margin-bottom:8px}.viewer-wrap{margin-top:10px}}
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <h1>Website Viewer — desktop / custom ratios</h1>
      <div class="small">Enter a URL below and choose a device ratio or custom width & height. Note: some websites prevent embedding (X-Frame-Options / CSP).</div><div class="controls">
    <div>
      <div style="display:flex;gap:8px;margin-top:12px;align-items:center">
        <label for="url">URL</label>
        <input id="url" type="text" placeholder="https://example.com" style="flex:1" value="https://example.com">
        <button id="load">Load</button>
      </div>

      <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
        <label for="preset">Preset</label>
        <select id="preset">
          <option value="responsive">Responsive (fills container)</option>
          <option value="desktop1366">Desktop 1366 × 768</option>
          <option value="laptop1280">Laptop 1280 × 800</option>
          <option value="tablet1024">Tablet 1024 × 1366 (portrait)</option>
          <option value="ipad_land">iPad 1024 × 768 (landscape)</option>
          <option value="mobile360">Mobile 360 × 800</option>
        </select>

        <label for="scale">Fit</label>
        <select id="scale">
          <option value="contain">Fit to container</option>
          <option value="actual">Actual size (no scaling)</option>
          <option value="cover">Cover (fill, may crop)</option>
        </select>
      </div>

      <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
        <label>Custom</label>
        <input id="width" type="number" placeholder="width (px)" style="width:110px"> ×
        <input id="height" type="number" placeholder="height (px)" style="width:110px">
        <button id="applyCustom">Apply</button>
      </div>

      <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
        <label>Orientation</label>
        <button class="preset-btn" data-rot="0">Landscape</button>
        <button class="preset-btn" data-rot="90">Portrait</button>
        <label style="margin-left:8px">Zoom</label>
        <input id="zoom" type="range" min="0.2" max="1.5" step="0.01" value="1" style="width:120px">
        <span id="zoomVal">100%</span>
      </div>

      <div style="margin-top:10px" class="kb">
        <div class="small">Tip: If a site refuses to load in the iframe due to security headers, try opening it in a new tab or using a server-side proxy.</div>
      </div>
    </div>

    <div>
      <div class="card" style="padding:10px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="small">Current viewport</div>
            <div id="currentSize" style="font-weight:600">— × —</div>
          </div>
          <div>
            <button id="openNew">Open in new tab</button>
          </div>
        </div>
        <div style="margin-top:8px" class="info">Status: <span id="status">idle</span></div>
      </div>
    </div>
  </div>

  <div class="viewer-wrap card">
    <div class="viewport-frame" id="viewportContainer">
      <div id="frameHolder" class="frame-inner" style="width:100%;height:100%;display:flex;align-items:center;justify-content:center">
        <iframe id="viewer" sandbox="allow-scripts allow-forms allow-popups allow-same-origin" style="width:100%;height:100%;border:0;background:white" srcdoc="<p style=\"padding:18px;font-family:system-ui\">Enter a URL and press Load to preview here.</p>"></iframe>
      </div>
    </div>
    <div class="info" id="notes"></div>
  </div>

</div>

  </div>  <script>
    const urlInput = document.getElementById('url');
    const loadBtn = document.getElementById('load');
    const preset = document.getElementById('preset');
    const widthIn = document.getElementById('width');
    const heightIn = document.getElementById('height');
    const applyCustom = document.getElementById('applyCustom');
    const viewer = document.getElementById('viewer');
    const frameHolder = document.getElementById('frameHolder');
    const currentSize = document.getElementById('currentSize');
    const status = document.getElementById('status');
    const notes = document.getElementById('notes');
    const openNew = document.getElementById('openNew');
    const scaleSelect = document.getElementById('scale');
    const zoom = document.getElementById('zoom');
    const zoomVal = document.getElementById('zoomVal');

    function updateCurrentSize(w,h){ currentSize.textContent = w + ' × ' + h; }

    const presets = {
      desktop1366: {w:1366,h:768},
      laptop1280: {w:1280,h:800},
      tablet1024:{w:1024,h:1366},
      ipad_land:{w:1024,h:768},
      mobile360:{w:360,h:800}
    }

    function applyViewport(w,h){
      // set numeric values and apply style to frameHolder
      frameHolder.style.width = w + 'px';
      frameHolder.style.height = h + 'px';
      updateCurrentSize(w,h);
      // scale to fit container if requested
      const container = document.getElementById('viewportContainer');
      const fitMode = scaleSelect.value;
      const zoomFactor = parseFloat(zoom.value) || 1;
      if(fitMode === 'contain'){
        const cw = container.clientWidth - 24; // padding
        const ch = 600 - 24; // fixed viewer frame height baseline
        const scale = Math.min(cw / w, ch / h, 1) * zoomFactor;
        frameHolder.style.transform = 'scale(' + scale + ')';
        frameHolder.style.transformOrigin = 'top left';
      } else if(fitMode === 'cover'){
        const cw = container.clientWidth - 24;
        const ch = 600 - 24;
        const scale = Math.max(cw / w, ch / h) * zoomFactor;
        frameHolder.style.transform = 'scale(' + scale + ')';
        frameHolder.style.transformOrigin = 'top left';
      } else {
        frameHolder.style.transform = 'scale(' + zoomFactor + ')';
      }
    }

    function normalizeUrl(u){
      try{ new URL(u); return u; }catch(e){ return 'http://' + u; }
    }

    loadBtn.addEventListener('click', ()=>{
      const raw = urlInput.value.trim();
      if(!raw){ alert('Enter a URL'); return; }
      const normalized = normalizeUrl(raw);
      status.textContent = 'loading...';
      notes.textContent = '';
      // set iframe src
      viewer.removeAttribute('srcdoc');
      viewer.src = normalized;
      openNew.onclick = ()=> window.open(normalized, '_blank');
    });

    // Preset change
    preset.addEventListener('change', ()=>{
      const val = preset.value;
      if(val === 'responsive'){
        frameHolder.style.width = '100%'; frameHolder.style.height = '600px';
        updateCurrentSize('responsive','600');
        frameHolder.style.transform = 'scale(1)';
        frameHolder.style.maxWidth = '100%';
        return;
      }
      const p = presets[val];
      if(p) {
        widthIn.value = p.w; heightIn.value = p.h;
        applyViewport(p.w,p.h);
      }
    });

    applyCustom.addEventListener('click', ()=>{
      const w = parseInt(widthIn.value,10);
      const h = parseInt(heightIn.value,10);
      if(!w || !h){ alert('Enter valid width and height'); return; }
      applyViewport(w,h);
    });

    // Orientation buttons
    document.querySelectorAll('.preset-btn[data-rot]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const rot = parseInt(btn.getAttribute('data-rot'));
        let w = parseInt(widthIn.value,10) || frameHolder.clientWidth;
        let h = parseInt(heightIn.value,10) || frameHolder.clientHeight;
        if(rot === 90 || rot === -90){ [w,h] = [h,w]; }
        widthIn.value = w; heightIn.value = h;
        applyViewport(w,h);
      });
    });

    // zoom slider
    zoom.addEventListener('input', ()=>{
      zoomVal.textContent = Math.round(zoom.value*100) + '%';
      // reapply using current width/height
      const w = parseInt(widthIn.value,10) || frameHolder.clientWidth;
      const h = parseInt(heightIn.value,10) || frameHolder.clientHeight;
      applyViewport(w,h);
    });

    // iframe load detection
    viewer.addEventListener('load', ()=>{
      status.textContent = 'loaded — may be cross-origin';
      notes.textContent = '';
      // detect if the site refused to be embedded
      setTimeout(()=>{
        try{
          // accessing contentDocument will throw for cross-origin pages
          const doc = viewer.contentDocument;
          if(!doc || doc.documentElement.innerHTML.trim().length === 0){
            notes.innerHTML = '<span class="danger">This page could not be embedded (empty response). Try opening in a new tab or use a proxy.</span>';
            status.textContent = 'blocked or empty';
          } else {
            status.textContent = 'loaded (same-origin)';
          }
        }catch(e){
          // cross-origin; we can't inspect but it likely loaded — still may be blocked by X-Frame-Options
          // Offer helpful message
          notes.innerHTML = 'If you see a blank screen the site may block framing (X-Frame-Options or Content-Security-Policy). Open in a new tab if needed.';
          status.textContent = 'loaded (cross-origin)';
        }
      },300);
    });

    // initial viewport
    preset.value = 'desktop1366';
    preset.dispatchEvent(new Event('change'));

  </script></body>
</html>
